# 思源笔记实时跟踪文件标题下信息的方案

## 目标
将多个格式固定的思源笔记文档（如文档A）中的字段信息（如设计人、设计时间等）实时汇总到另一个文档（如文档S）的数据库表格中，并在源文档信息修改时，汇总表能自动更新。

## 解决方案

### 1. 利用文档属性（Properties）

思源笔记允许为文档（块）设置属性。不能将字段信息作为普通文本，而应将其作为文档的属性来存储。

**操作步骤：**

*   打开源文档A（如“篮球进球检测视觉方案”）。
*   在编辑器顶部点击 `...` 菜单，选择 **“属性”**。
*   在弹出的属性面板中，添加所需字段作为属性：
    *   `设计人`: `小张`
    *   `设计时间`: `2025/03`
    *   `状态`: `完成核心功能`
    *   `备注`: `归档，阿峰-摄像头放置在地面上重新开发`
*   **或者**，在文档开头（紧随标题后）使用YAML Front Matter格式（以 `---` 开始和结束）：
    ```yaml
    ---
    设计人: 小张
    设计时间: 2025/03
    状态: 完成核心功能
    备注: 归档，阿峰-摄像头放置在地面上重新开发
    ---
    ```
    *建议优先使用属性面板设置，因为它更直观且不易出错。*

### 2. 创建汇总查询（Embed Block）

在目标汇总文档S中，使用SQL查询来动态提取所有源文档的属性，并生成表格。

**操作步骤：**

*   在文档S中，插入一个 **“SQL查询”** 嵌入块。
*   输入SQL语句，查询设置了相关属性的文档。例如：
    ```sql
    SELECT
      content AS '项目名称', -- 假设content的第一部分是文档标题
      设计人,
      设计时间,
      状态,
      备注
    FROM
      blocks
    WHERE
      设计人 IS NOT NULL
      AND 设计时间 IS NOT NULL
      AND 状态 IS NOT NULL
      AND 备注 IS NOT NULL
    ```
    *注意：* `content` 的提取方式可能需要根据你的文档结构微调，确保它能准确代表“项目名称”。如果标题是独立块，可能需要更复杂的关联查询。

### 3. 实现“实时”更新

*   思源笔记的查询块会根据底层数据库的变更自动刷新。
*   当你修改源文档A中的属性值时，文档S中的查询结果表格（即汇总信息）会随之更新。
*   **关键：** 更新依赖于思源笔记的索引系统。修改YAML块中的*文本*可能不会被索引更新识别，因此使用**属性面板**修改属性是最可靠的同步方式。

## 总结

此方案通过将源文档的字段信息存储为**属性**，并使用**SQL查询**在另一个文档中动态提取和展示这些属性，实现了信息的集中汇总和相对实时的联动更新。这是对思源笔记原生功能的合理应用，避免了手动复制粘贴的繁琐。